<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">SelfOwnedStETHBurner | Lido Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://lidofinance.github.io/contracts/self-owned-steth-burner"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="SelfOwnedStETHBurner | Lido Docs"><meta data-react-helmet="true" name="description" content="- Source Code"><meta data-react-helmet="true" property="og:description" content="- Source Code"><link data-react-helmet="true" rel="icon" href="/img/favicon-32x32.png"><link data-react-helmet="true" rel="canonical" href="https://lidofinance.github.io/contracts/self-owned-steth-burner"><link data-react-helmet="true" rel="alternate" href="https://lidofinance.github.io/contracts/self-owned-steth-burner" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://lidofinance.github.io/contracts/self-owned-steth-burner" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8c219a48.css">
<link rel="preload" href="/assets/js/runtime~main.1683206d.js" as="script">
<link rel="preload" href="/assets/js/main.4049db9f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Lido Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="Lido Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Lido Docs</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lidofinance" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_CDc6"><kbd class="searchHint_2RRg">ctrl</kbd><kbd class="searchHint_2RRg">K</kbd></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lido-dao">Lido DAO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guides/steth-integration-guide">stETH/wstETH integration guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/guides/node-operator-manual">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/integrations/sdk">Integrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/token-guides/steth-superuser-functions">Token guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/contracts/lido">Contracts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/lido">Lido</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/lido-oracle">LidoOracle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/stable-swap-state-oracle">StableSwapStateOracle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/steth-price-feed">StEthPriceFeed</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/node-operators-registry">NodeOperatorsRegistry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/withdrawals-manager-stub">WithdrawalsManagerStub</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/wsteth">wstETH</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/deposit-security-module">DepositSecurityModule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/contracts/self-owned-steth-burner">SelfOwnedStETHBurner</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/composite-post-rebase-beacon-receiver">CompositePostRebaseBeaconReceiver</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/lido-execution-layer-rewards-vault">LidoExecutionLayerRewardsVault</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/security/bugbounty">Security</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/deployed-contracts">Deployed Contracts</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>SelfOwnedStETHBurner</h1></header><ul><li><a href="https://github.com/lidofinance/lido-dao/blob/develop/contracts/0.8.9/SelfOwnedStETHBurner.sol" target="_blank" rel="noopener noreferrer">Source Code</a></li><li><a href="https://etherscan.io/address/0xB280E33812c0B09353180e92e27b8AD399B07f26" target="_blank" rel="noopener noreferrer">Deployed Contract</a></li></ul><p>The contract provides a way for Lido governance to burn stETH token shares as a means to cover losses in staking.</p><p>It relies on the <a href="/contracts/lido#rebasing">rebasing</a> nature of stETH. The <code>Lido</code> contract calculates user balance using the following equation,
<code>balanceOf(account) = shares[account] * totalPooledEther / totalShares</code>.
Therefore, burning shares (e.g. decreasing the <code>totalShares</code> amount) increases stETH holders&#x27; balances.</p><p>The contract doesnâ€™t implement any auto-cover mechanism. There are no presumptions and prerequisites for
when and how exactly loss compensation happens. <code>SelfOwnedStETHBurner</code> provides a safe and deterministic way
to incur a positive stETH token rebase by gradually decreasing <code>totalShares</code> that can be correctly handled
by 3rd party protocols (e.g. Anchor Protocol) integrated with stETH.</p><p><code>SelfOwnedStETHBurner</code> accepts burning requests by locking caller-provided stETH tokens. Those burn requests
are initially set by the contract to a pending state. Actual burning happens as part of an oracle (LidoOracle)
beacon report to prevent additional fluctuations of the existing stETH token rebase period (~24h).</p><p>We also distinguish two types of shares burn requests:</p><ul><li>request to <strong>cover</strong> a slashing event (e.g. decreasing of the total pooled ETH amount
between the two consecutive oracle reports);</li><li>request to burn shares for any other cases (<strong>non-cover</strong>).</li></ul><p>The contract has two separate counters for the burnt shares: cover and non-cover ones. The contract has
exclusive access to the stETH shares burning via constrained <a href="/token-guides/steth-superuser-functions#superuser-roles"><code>BURN_ROLE</code></a>:
burning allowed only from the contract&#x27;s own balance only.</p><p>To prevent overly large rebasing events entailing unfair coverage distribution via front-running techniques,
the contract has a limit on burnable shares per single beacon report. Thus, burning requests
can be executed in more than one pass.</p><p>The full formal spec is provided with
<a href="https://github.com/lidofinance/lido-improvement-proposals/blob/develop/LIPS/lip-6.md" target="_blank" rel="noopener noreferrer">LIP-6</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="cover-application-workflow">Cover application workflow<a class="hash-link" href="#cover-application-workflow" title="Direct link to heading">â€‹</a></h2><ol><li>The contract accepts burn requests only from the <code>Aragon Voting</code> contract by transferring stETH.</li><li>The transfer is performed by <code>requestBurnMyStETHForCover</code> func call which requires explicit <code>approve</code> beforehand.</li><li>Cover application is performed as a part of oracle reports and rate-limited to prevent sandwiching.</li></ol><p>NB: daily burn quota is set to 4BP of TVL, consider to tune it if needed (overall token rebase should stay less than 7.5BP).</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="shares-burnt-counters">Shares burnt counters<a class="hash-link" href="#shares-burnt-counters" title="Direct link to heading">â€‹</a></h2><p>The contract keeps count of all shares ever burned by way of maintaining two internal counters: <code>totalCoverSharesBurnt</code> and <code>totalNonCoverSharesBurnt</code> for cover and non-cover burns respectively. These counters are increased when actual stETH burn is performed as part of the Lido Oracle report.</p><p>This makes it possible to split any stETH rebase into two sub-components: the rewards-induced rebase
and cover application-induced rebase, which can be done as follows:</p><ol><li><p>Before the rebase, store the previous values of both counters, as well as the value of stETH share price:</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">prevCoverSharesBurnt = SelfOwnedStETHBurner.totalCoverSharesBurnt()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">prevSharePrice = stETH.totalSupply() / stETH.getTotalShares()</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>After the rebase, perform the following calculations:</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sharesBurntFromOldToNew = SelfOwnedStETHBurner.totalCoverSharesBurnt() - prevCoverSharesBurnt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">newSharePriceAfterCov = stETH.totalSupply() / (stETH.getTotalShares() + sharesBurntFromOldToNew);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">newSharePrice = stETH.totalSupply() / stETH.getTotalShares();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// rewards-induced share price increase</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rewardPerShare = newSharePriceAfterCov - prevSharePrice;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// cover-induced share price increase</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nonRewardSharePriceIncrease = newSharePrice - prevSharePrice - rewardPerShare;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><p>The Anchor Protocol integration (bETH token) already has the calculations proposed above implemented using a plug-in
adapter <a href="https://github.com/lidofinance/anchor-collateral-steth/blob/feature/lip-6/contracts/InsuranceConnector.vy" target="_blank" rel="noopener noreferrer"><code>InsuranceConnector</code></a>
for retrieving the total number of shares burnt for cover purposes.
See <a href="https://github.com/lidofinance/anchor-collateral-steth/blob/e0e23e63ad24d44c2ffc0799cc701dbe71a578ed/contracts/AnchorVault.vy#L442" target="_blank" rel="noopener noreferrer"><code>AnchorVault.collect_rewards#442</code></a>
for the possible sketch of usage with similar integrations.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="view-methods">View methods<a class="hash-link" href="#view-methods" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="function-getcoversharesburnt">Function: getCoverSharesBurnt<a class="hash-link" href="#function-getcoversharesburnt" title="Direct link to heading">â€‹</a></h3><p>Returns the total cover shares ever burnt.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getCoverSharesBurnt() external view returns (uint256)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="function-getnoncoversharesburnt">Function: getNonCoverSharesBurnt<a class="hash-link" href="#function-getnoncoversharesburnt" title="Direct link to heading">â€‹</a></h3><p>Returns the total non-cover shares ever burnt.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getNonCoverSharesBurnt() external view returns (uint256)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="function-getburnamountperrunquota">Function: getBurnAmountPerRunQuota<a class="hash-link" href="#function-getburnamountperrunquota" title="Direct link to heading">â€‹</a></h3><p>Returns the maximum amount of shares allowed to burn per single run.
Expressed in basis points as ratio of shares to burn to the total shares in existence.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>10000 basis points (BP) corresponds to 100%.</p></div></div><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getBurnAmountPerRunQuota() external view returns (uint256)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="function-getexcesssteth">function getExcessStETH<a class="hash-link" href="#function-getexcesssteth" title="Direct link to heading">â€‹</a></h3><p>Returns the stETH amount belonging to the burner contract address but not marked for burning.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getExcessStETH() external view return (uint256)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="methods">Methods<a class="hash-link" href="#methods" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="function-requestburnmystethforcover">Function: requestBurnMyStETHForCover<a class="hash-link" href="#function-requestburnmystethforcover" title="Direct link to heading">â€‹</a></h3><p>Transfers stETH tokens from the message sender and irreversibly locks these on the burner contract address.
Internally converts tokens amount into underlying shares amount and marks the converted shares amount
for cover-backed burning by increasing the internal <code>coverSharesBurnRequested</code> counter.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function requestBurnMyStETHForCover(uint256 _stETH2Burn) external</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Reverts if any of the following is true:</p><ul><li><code>msg.sender</code> is not equal to the set upon construction <code>voting</code> address;</li><li>no stETH provided (<code>_stETH2Burn == 0</code>);</li><li>no stETH transferred (allowance exceeded).</li></ul></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="parameters">Parameters:<a class="hash-link" href="#parameters" title="Direct link to heading">â€‹</a></h4><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>_stETH2Burn</code></td><td><code>uint256</code></td><td>stETH tokens amount (not shares amount) to burn</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_y2LR" id="function-requestburnmysteth">Function: requestBurnMyStETH<a class="hash-link" href="#function-requestburnmysteth" title="Direct link to heading">â€‹</a></h3><p>Transfers stETH tokens from the message sender and irreversibly locks these on the burner contract address.
Internally converts tokens amount into underlying shares amount and marks the converted amount for
non-cover-backed burning by increasing the internal <code>nonCoverSharesBurnRequested</code> counter.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Reverts if any of the following is true:</p><ul><li><code>msg.sender</code> is not equal to the set upon construction <code>voting</code> address;</li><li>no stETH provided (<code>_stETH2Burn == 0</code>);</li><li>no stETH transferred (allowance exceeded).</li></ul></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="parameters-1">Parameters:<a class="hash-link" href="#parameters-1" title="Direct link to heading">â€‹</a></h4><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>_stETH2Burn</code></td><td><code>uint256</code></td><td>stETH tokens amount (not shares amount) to burn</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_y2LR" id="function-setburnamountperrunquota">Function: setBurnAmountPerRunQuota<a class="hash-link" href="#function-setburnamountperrunquota" title="Direct link to heading">â€‹</a></h3><p>Sets the amount of shares allowed to burn per single run.
Expressed in basis points as ratio of shares to burn to the total shares in existence.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function setBurnAmountPerRunQuota(uint256 _maxBurnAmountPerRunBasisPoints) external</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Reverts if any of the following is true:</p><ul><li><code>_maxBurnAmountPerRunBasisPoints</code> is zero;</li><li><code>_maxBurnAmountPerRunBasisPoints</code> exceeds <code>10000</code>;</li><li><code>msg.sender</code> is not equal to the set upon construction <code>voting</code> address;</li></ul></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="parameters-2">Parameters:<a class="hash-link" href="#parameters-2" title="Direct link to heading">â€‹</a></h4><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>_maxBurnAmountPerRunBasisPoints</code></td><td><code>uint256</code></td><td>new quota value, BP</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_y2LR" id="function-processlidooraclereport">Function: processLidoOracleReport<a class="hash-link" href="#function-processlidooraclereport" title="Direct link to heading">â€‹</a></h3><p>Enacts cover/non-cover burning requests and logs cover/non-cover shares amount just burnt.
Increments public <code>totalCoverSharesBurnt</code> and <code>totalNonCoverSharesBurnt</code> counters.
Decrements internal <code>coverSharesBurnRequested</code> and <code>nonCoverSharesBurnRequested</code> counters.</p><p>Does nothing if there are no pending burning requests.
Could be called as part of an oracle quorum report only.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function: processLidoOracleReport(uint256, uint256, uint256) external override</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The burning requests could be executed partially per single run due to the <code>maxBurnAmountPerRunBasisPoints</code> limit.
The cover reasoned burning requests have a higher priority of execution.</p><p>Reverts if there are pending burning requests and the <code>msg.sender</code> is not of one
of the <code>LidoOracle</code> or <code>LidoOracle.getBeaconReportReceiver()</code>.</p><p>Input parameters are needed only for the ABI compatibility, the values are always ignored.</p><p>See also:
<a href="/contracts/lido-oracle#receiver-function-to-be-invoked-on-report-pushes"><code>IBeaconReportReceiver.processLidoOracleReport</code></a>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="function-recoverexcesssteth">function recoverExcessStETH<a class="hash-link" href="#function-recoverexcesssteth" title="Direct link to heading">â€‹</a></h3><p>Transfers the excess stETH amount (e.g. belonging to the burner contract address but not marked for burning)
to the Lido treasury address (the <code>DAO Agent</code> contract) set upon the contract construction.</p><p>Does nothing if the <code>getExcessStETH</code> view func returns 0 (zero), e.g. there is no excess stETH
on the contract&#x27;s balance.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function recoverExcessStETH() external</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="function-recovererc20">Function: recoverERC20<a class="hash-link" href="#function-recovererc20" title="Direct link to heading">â€‹</a></h3><p>Transfers a given amount of an ERC20-token (defined by the provided contract address) belonging
to the burner contract address to the Lido treasury (the <code>DAO Agent</code> contract) address.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function recoverERC20(address _token, uint256 _amount) external</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Reverts if any of the following is true:</p><ul><li><code>_amount</code> value is 0 (zero);</li><li><code>_token</code> address is 0 (zero);</li><li><code>_token</code> address is equal to the <code>stETH</code> address (use <code>recoverExcessStETH</code> instead).</li></ul></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="parameters-3">Parameters:<a class="hash-link" href="#parameters-3" title="Direct link to heading">â€‹</a></h4><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>_token</code></td><td><code>address</code></td><td>ERC20-compatible token address to recover</td></tr><tr><td><code>_amount</code></td><td><code>uint256</code></td><td>Amount to recover</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_y2LR" id="function-recovererc721">Function: recoverERC721<a class="hash-link" href="#function-recovererc721" title="Direct link to heading">â€‹</a></h3><p>Transfers a given ERC721-compatible NFT (defined by the contract address) belonging to the burner contract address
to the Lido treasury (the <code>DAO Agent</code>) address.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function recoverERC721(address _token, uint256 _tokenId) external</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Reverts if <code>_token</code> address is 0 (zero).</p></div></div><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>_token</code></td><td><code>address</code></td><td>ERC721-compatible token address to recover</td></tr><tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>Token id to recover</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/lidofinance/docs/blob/main/docs/contracts/self-owned-steth-burner.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/contracts/deposit-security-module"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">DepositSecurityModule</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/contracts/composite-post-rebase-beacon-receiver"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CompositePostRebaseBeaconReceiver</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#cover-application-workflow" class="table-of-contents__link toc-highlight">Cover application workflow</a></li><li><a href="#shares-burnt-counters" class="table-of-contents__link toc-highlight">Shares burnt counters</a></li><li><a href="#view-methods" class="table-of-contents__link toc-highlight">View methods</a><ul><li><a href="#function-getcoversharesburnt" class="table-of-contents__link toc-highlight">Function: getCoverSharesBurnt</a></li><li><a href="#function-getnoncoversharesburnt" class="table-of-contents__link toc-highlight">Function: getNonCoverSharesBurnt</a></li><li><a href="#function-getburnamountperrunquota" class="table-of-contents__link toc-highlight">Function: getBurnAmountPerRunQuota</a></li><li><a href="#function-getexcesssteth" class="table-of-contents__link toc-highlight">function getExcessStETH</a></li></ul></li><li><a href="#methods" class="table-of-contents__link toc-highlight">Methods</a><ul><li><a href="#function-requestburnmystethforcover" class="table-of-contents__link toc-highlight">Function: requestBurnMyStETHForCover</a></li><li><a href="#function-requestburnmysteth" class="table-of-contents__link toc-highlight">Function: requestBurnMyStETH</a></li><li><a href="#function-setburnamountperrunquota" class="table-of-contents__link toc-highlight">Function: setBurnAmountPerRunQuota</a></li><li><a href="#function-processlidooraclereport" class="table-of-contents__link toc-highlight">Function: processLidoOracleReport</a></li><li><a href="#function-recoverexcesssteth" class="table-of-contents__link toc-highlight">function recoverExcessStETH</a></li><li><a href="#function-recovererc20" class="table-of-contents__link toc-highlight">Function: recoverERC20</a></li><li><a href="#function-recovererc721" class="table-of-contents__link toc-highlight">Function: recoverERC721</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.1683206d.js"></script>
<script src="/assets/js/main.4049db9f.js"></script>
</body>
</html>