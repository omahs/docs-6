<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">LidoOracle | Lido Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://lidofinance.github.io/contracts/lido-oracle"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="LidoOracle | Lido Docs"><meta data-react-helmet="true" name="description" content="- Source code"><meta data-react-helmet="true" property="og:description" content="- Source code"><link data-react-helmet="true" rel="icon" href="/img/favicon-32x32.png"><link data-react-helmet="true" rel="canonical" href="https://lidofinance.github.io/contracts/lido-oracle"><link data-react-helmet="true" rel="alternate" href="https://lidofinance.github.io/contracts/lido-oracle" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://lidofinance.github.io/contracts/lido-oracle" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.340b1279.css">
<link rel="preload" href="/assets/js/runtime~main.2ea3e7c3.js" as="script">
<link rel="preload" href="/assets/js/main.8547ac4c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Lido Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="Lido Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Lido Docs</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lidofinance" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_CDc6"><kbd class="searchHint_2RRg">ctrl</kbd><kbd class="searchHint_2RRg">K</kbd></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lido-dao">Lido DAO</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/guides/node-operator-manual">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/integrations/sdk">Integrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/token-guides/steth-superuser-functions">Token guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/contracts/lido">Contracts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/lido">Lido</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/contracts/lido-oracle">LidoOracle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/stable-swap-state-oracle">StableSwapStateOracle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/steth-price-feed">StEthPriceFeed</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/node-operators-registry">NodeOperatorsRegistry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/withdrawals-manager-stub">WithdrawalsManagerStub</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/wsteth">wstETH</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/deposit-security-module">DepositSecurityModule</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/security/bugbounty">Security</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/deployed-contracts">Deployed Contracts</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>LidoOracle</h1></header><ul><li><a href="https://github.com/lidofinance/lido-dao/blob/master/contracts/0.4.24/oracle/LidoOracle.sol" target="_blank" rel="noopener noreferrer">Source code</a></li><li><a href="https://etherscan.io/address/0x442af784A788A5bd6F42A01Ebe9F287a871243fb" target="_blank" rel="noopener noreferrer">Deployed contract</a></li></ul><p>LidoOracle is a contract where oracles send addresses&#x27; balances controlled by the DAO on the ETH
2.0 side. The balances can go up because of reward accumulation and can go down due to slashing and
staking penalties. Oracles are assigned by the DAO.</p><p>Oracle daemons push their reports every frame (225 epochs currently, equal to one day) and when the
number of the same reports reaches the <a href="#getquorum">&#x27;quorum&#x27;</a> value, the report is pushed to the
<a href="/contracts/lido">Lido contract</a>.</p><p>The following mechanisms are also worth mentioning.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="store-the-collected-reports-as-an-array">Store the collected reports as an array<a class="hash-link" href="#store-the-collected-reports-as-an-array" title="Direct link to heading">â€‹</a></h2><p>The report variant is a report with a counter - how many times this report was pushed by
oracles. This strongly simplified logic of <code>_getQuorumReport</code>, because in the majority of cases, we
only have 1 variant of the report so we just make sure that its counter exceeded the quorum value.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The important note here is that when we remove an oracle (with <code>removeOracleMember</code>), we
also need to remove her report from the currently accepted reports. As of now, we do not keep a
mapping between members and their reports, we just clean all existing reports and wait for the
remaining oracles to push the same epoch again.</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="add-calculation-of-staker-rewards-apr">Add calculation of staker rewards <a href="https://en.wikipedia.org/wiki/Annual_percentage_rate" target="_blank" rel="noopener noreferrer">APR</a><a class="hash-link" href="#add-calculation-of-staker-rewards-apr" title="Direct link to heading">â€‹</a></h2><p>To calculate the percentage of rewards for stakers, we store and provide the following data:</p><ul><li><code>preTotalPooledEther</code> - total pooled ether mount, queried right before every report push to the
<a href="/contracts/lido">Lido contract</a>,</li><li><code>postTotalPooledEther</code> - the same, but queried right after the push,</li><li><code>lastCompletedEpochId</code> - the last epoch that we pushed the report to the Lido,</li><li><code>timeElapsed</code> - the time in seconds between the current epoch of push and the
<code>lastCompletedEpochId</code>. Usually, it should be a frame long: 32 <em> 12 </em> 225 = 86400, but maybe
multiples more in case that the previous frame didn&#x27;t reach the quorum.</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>It is important to note here, that we collect post/pre pair (not current/last), to avoid
the influence of new staking during the epoch.</p></div></div><p>To calculate the APR, use the following formula:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">APR = (postTotalPooledEther - preTotalPooledEther) * secondsInYear / (preTotalPooledEther * timeElapsed)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="sanity-checks-the-oracles-reports-by-configurable-values">Sanity checks the oracles reports by configurable values<a class="hash-link" href="#sanity-checks-the-oracles-reports-by-configurable-values" title="Direct link to heading">â€‹</a></h2><p>In order to limit the misbehaving oracles impact, we want to limit oracles report change by 10% APR
increase in stake and 5% decrease in stake. Both values are configurable by the governance in case
of extremely unusual circumstances.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Note that the change is evaluated after the quorum of oracles reports is reached, and not
on the individual report.</p></div></div><p>And the logic of reporting to the <a href="/contracts/lido">Lido contract</a> got a call to <code>_reportSanityChecks</code> that does
the following. It compares the <code>preTotalPooledEther</code> and <code>postTotalPooledEther</code> (see above) and</p><ul><li>if there is a profit or same, calculates the <a href="https://en.wikipedia.org/wiki/Annual_percentage_rate" target="_blank" rel="noopener noreferrer">APR</a>, compares it with the upper bound. If was
above, reverts the transaction with <code>ALLOWED_BEACON_BALANCE_INCREASE</code> code.</li><li>if there is a loss, calculates relative decrease and compares it with the lower bound. If was
below, reverts the transaction with <code>ALLOWED_BEACON_BALANCE_DECREASE</code> code.</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="receiver-function-to-be-invoked-on-report-pushes">Receiver function to be invoked on report pushes<a class="hash-link" href="#receiver-function-to-be-invoked-on-report-pushes" title="Direct link to heading">â€‹</a></h2><p>To provide the external contract with updates on report pushes (every time the quorum is reached
among oracle daemons data), we provide the following setter and getter functions. It might be
needed to implement some updates to the external contracts that should happen at the same tx the
<a href="/contracts/lido#rebasing">rebase</a> happens (e.g. adjusting uniswap v2 pools to reflect the
rebase).</p><p>And when the callback is set, the following function will be invoked on every report push.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">interface IBeaconReportReceiver {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function processLidoOracleReport(uint256 _postTotalPooledEther,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                     uint256 _preTotalPooledEther,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                     uint256 _timeElapsed) external;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The arguments provided are the same as described in section <a href="#add-calculation-of-staker-rewards-apr">above</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="view-methods">View Methods<a class="hash-link" href="#view-methods" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getlido">getLido()<a class="hash-link" href="#getlido" title="Direct link to heading">â€‹</a></h3><p>Return the <a href="/contracts/lido">Lido contract</a> address.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getLido() returns (ILido)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getquorum">getQuorum()<a class="hash-link" href="#getquorum" title="Direct link to heading">â€‹</a></h3><p>Return the number of exactly the same reports needed to finalize the epoch.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getQuorum() returns (uint256)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getallowedbeaconbalanceannualrelativeincrease">getAllowedBeaconBalanceAnnualRelativeIncrease()<a class="hash-link" href="#getallowedbeaconbalanceannualrelativeincrease" title="Direct link to heading">â€‹</a></h3><p>Return the upper bound of the reported balance possible increase in <a href="https://en.wikipedia.org/wiki/Annual_percentage_rate" target="_blank" rel="noopener noreferrer">APR</a>. See above about
<a href="#sanity-checks-the-oracles-reports-by-configurable-values">sanity checks</a>.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getAllowedBeaconBalanceAnnualRelativeIncrease() returns (uint256)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getallowedbeaconbalancerelativedecrease">getAllowedBeaconBalanceRelativeDecrease()<a class="hash-link" href="#getallowedbeaconbalancerelativedecrease" title="Direct link to heading">â€‹</a></h3><p>Return the lower bound of the reported balance possible decrease. See above about <a href="#sanity-checks-the-oracles-reports-by-configurable-values">sanity
checks</a>.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getAllowedBeaconBalanceRelativeDecrease() returns (uint256)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getbeaconreportreceiver">getBeaconReportReceiver()<a class="hash-link" href="#getbeaconreportreceiver" title="Direct link to heading">â€‹</a></h3><p>Return the receiver contract address to be called when the report is pushed to <a href="/contracts/lido">Lido</a>.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getBeaconReportReceiver() returns (address)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getcurrentoraclesreportstatus">getCurrentOraclesReportStatus()<a class="hash-link" href="#getcurrentoraclesreportstatus" title="Direct link to heading">â€‹</a></h3><p>Return the current reporting bitmap, representing oracles who have already pushed their version of
report during the expected epoch.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Every oracle bit corresponds to the index of the oracle in the current members list</p></div></div><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getCurrentOraclesReportStatus() returns (uint256)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getcurrentreportvariantssize">getCurrentReportVariantsSize()<a class="hash-link" href="#getcurrentreportvariantssize" title="Direct link to heading">â€‹</a></h3><p>Return the current reporting variants array size.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getCurrentReportVariantsSize() returns (uint256)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getcurrentreportvariant">getCurrentReportVariant()<a class="hash-link" href="#getcurrentreportvariant" title="Direct link to heading">â€‹</a></h3><p>Return the current reporting array element with index <code>_index</code>.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getCurrentReportVariant(uint256 _index)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getexpectedepochid">getExpectedEpochId()<a class="hash-link" href="#getexpectedepochid" title="Direct link to heading">â€‹</a></h3><p>Return epoch that can be reported by oracles.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getExpectedEpochId() returns (uint256)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getoraclemembers">getOracleMembers()<a class="hash-link" href="#getoraclemembers" title="Direct link to heading">â€‹</a></h3><p>Return the current oracle member committee list.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getOracleMembers() returns (address[])</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getversion">getVersion()<a class="hash-link" href="#getversion" title="Direct link to heading">â€‹</a></h3><p>Return the initialized version of this contract starting from 0.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getVersion() returns (uint256)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getbeaconspec">getBeaconSpec()<a class="hash-link" href="#getbeaconspec" title="Direct link to heading">â€‹</a></h3><p>Return beacon specification data.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getBeaconSpec()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    returns (</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint64 epochsPerFrame,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint64 slotsPerEpoch,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint64 secondsPerSlot,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint64 genesisTime</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getcurrentepochid">getCurrentEpochId()<a class="hash-link" href="#getcurrentepochid" title="Direct link to heading">â€‹</a></h3><p>Return the epoch calculated from current timestamp.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getCurrentEpochId() returns (uint256)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getcurrentframe">getCurrentFrame()<a class="hash-link" href="#getcurrentframe" title="Direct link to heading">â€‹</a></h3><p>Return currently reportable epoch (the first epoch of the current frame) as well as its start and
end times in seconds.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getCurrentFrame()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    returns (</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 frameEpochId,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 frameStartTime,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 frameEndTime</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getlastcompletedepochid">getLastCompletedEpochId()<a class="hash-link" href="#getlastcompletedepochid" title="Direct link to heading">â€‹</a></h3><p>Return last completed epoch.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getLastCompletedEpochId() returns (uint256)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getlastcompletedreportdelta">getLastCompletedReportDelta()<a class="hash-link" href="#getlastcompletedreportdelta" title="Direct link to heading">â€‹</a></h3><p>Report beacon balance and its change during the last frame.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function getLastCompletedReportDelta()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    returns (</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 postTotalPooledEther,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 preTotalPooledEther,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 timeElapsed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="methods">Methods<a class="hash-link" href="#methods" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="setallowedbeaconbalanceannualrelativeincrease">setAllowedBeaconBalanceAnnualRelativeIncrease()<a class="hash-link" href="#setallowedbeaconbalanceannualrelativeincrease" title="Direct link to heading">â€‹</a></h3><p>Set the upper bound of the reported balance possible increase in APR to <code>_value</code>. See above about
<a href="#sanity-checks-the-oracles-reports-by-configurable-values">sanity checks</a>.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function setAllowedBeaconBalanceAnnualRelativeIncrease(uint256 _value) auth(SET_REPORT_BOUNDARIES)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="setallowedbeaconbalancerelativedecrease">setAllowedBeaconBalanceRelativeDecrease()<a class="hash-link" href="#setallowedbeaconbalancerelativedecrease" title="Direct link to heading">â€‹</a></h3><p>Set the lower bound of the reported balance possible decrease to <code>_value</code>. See above about <a href="#sanity-checks-the-oracles-reports-by-configurable-values">sanity
checks</a>.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function setAllowedBeaconBalanceRelativeDecrease(uint256 _value) auth(SET_REPORT_BOUNDARIES)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="setbeaconreportreceiver">setBeaconReportReceiver()<a class="hash-link" href="#setbeaconreportreceiver" title="Direct link to heading">â€‹</a></h3><p>Set the receiver contract address to <code>_addr</code> to be called when the report is pushed.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Specify 0 to disable this functionality.</p></div></div><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function setBeaconReportReceiver(address _addr) auth(SET_BEACON_REPORT_RECEIVER)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="setbeaconspec">setBeaconSpec()<a class="hash-link" href="#setbeaconspec" title="Direct link to heading">â€‹</a></h3><p>Update beacon specification data.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function setBeaconSpec(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 _epochsPerFrame,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 _slotsPerEpoch,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 _secondsPerSlot,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 _genesisTime</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    auth(SET_BEACON_SPEC)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="initialize_v2">initialize_v2()<a class="hash-link" href="#initialize_v2" title="Direct link to heading">â€‹</a></h3><p>Initialize the contract v2 data, with sanity check bounds
(<code>_allowedBeaconBalanceAnnualRelativeIncrease</code>, <code>_allowedBeaconBalanceRelativeDecrease</code>).</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Public function <code>initialize</code> was removed from v2 because it is not needed once the contract is
initialized for the first time, that happened in v1. Instead we added <code>initialize_v2</code> function that
initializes newly added variables, updates the contract version to 1.</p></div></div><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function initialize_v2(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 _allowedBeaconBalanceAnnualRelativeIncrease,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 _allowedBeaconBalanceRelativeDecrease</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="addoraclemember">addOracleMember()<a class="hash-link" href="#addoraclemember" title="Direct link to heading">â€‹</a></h3><p>Add <code>_member</code> to the oracle member committee list.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function addOracleMember(address _member) auth(MANAGE_MEMBERS)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="removeoraclemember">removeOracleMember()<a class="hash-link" href="#removeoraclemember" title="Direct link to heading">â€‹</a></h3><p>Remove &#x27;<!-- -->_<!-- -->member` from the oracle member committee list.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function removeOracleMember(address _member) auth(MANAGE_MEMBERS)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="setquorum">setQuorum()<a class="hash-link" href="#setquorum" title="Direct link to heading">â€‹</a></h3><p>Set the number of exactly the same reports needed to finalize the epoch to <code>_quorum</code>.</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function setQuorum(uint256 _quorum) auth(MANAGE_QUORUM)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="reportbeacon">reportBeacon()<a class="hash-link" href="#reportbeacon" title="Direct link to heading">â€‹</a></h3><p>Accept oracle committee member reports from the ETH 2.0 side. Parameters:</p><ul><li><code>_epochId</code> - beacon chain epoch</li><li><code>_beaconBalance</code> - balance in gwei on the ETH 2.0 side (9-digit denomination)</li><li><code>_beaconValidators</code> - number of validators visible in this epoch</li></ul><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function reportBeacon(uint256 _epochId, uint64 _beaconBalance, uint32 _beaconValidators)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/lidofinance/docs/blob/main/docs/contracts/lido-oracle.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/contracts/lido"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Lido</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/contracts/stable-swap-state-oracle"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">StableSwapStateOracle</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#store-the-collected-reports-as-an-array" class="table-of-contents__link toc-highlight">Store the collected reports as an array</a></li><li><a href="#add-calculation-of-staker-rewards-apr" class="table-of-contents__link toc-highlight">Add calculation of staker rewards APR</a></li><li><a href="#sanity-checks-the-oracles-reports-by-configurable-values" class="table-of-contents__link toc-highlight">Sanity checks the oracles reports by configurable values</a></li><li><a href="#receiver-function-to-be-invoked-on-report-pushes" class="table-of-contents__link toc-highlight">Receiver function to be invoked on report pushes</a></li><li><a href="#view-methods" class="table-of-contents__link toc-highlight">View Methods</a><ul><li><a href="#getlido" class="table-of-contents__link toc-highlight">getLido()</a></li><li><a href="#getquorum" class="table-of-contents__link toc-highlight">getQuorum()</a></li><li><a href="#getallowedbeaconbalanceannualrelativeincrease" class="table-of-contents__link toc-highlight">getAllowedBeaconBalanceAnnualRelativeIncrease()</a></li><li><a href="#getallowedbeaconbalancerelativedecrease" class="table-of-contents__link toc-highlight">getAllowedBeaconBalanceRelativeDecrease()</a></li><li><a href="#getbeaconreportreceiver" class="table-of-contents__link toc-highlight">getBeaconReportReceiver()</a></li><li><a href="#getcurrentoraclesreportstatus" class="table-of-contents__link toc-highlight">getCurrentOraclesReportStatus()</a></li><li><a href="#getcurrentreportvariantssize" class="table-of-contents__link toc-highlight">getCurrentReportVariantsSize()</a></li><li><a href="#getcurrentreportvariant" class="table-of-contents__link toc-highlight">getCurrentReportVariant()</a></li><li><a href="#getexpectedepochid" class="table-of-contents__link toc-highlight">getExpectedEpochId()</a></li><li><a href="#getoraclemembers" class="table-of-contents__link toc-highlight">getOracleMembers()</a></li><li><a href="#getversion" class="table-of-contents__link toc-highlight">getVersion()</a></li><li><a href="#getbeaconspec" class="table-of-contents__link toc-highlight">getBeaconSpec()</a></li><li><a href="#getcurrentepochid" class="table-of-contents__link toc-highlight">getCurrentEpochId()</a></li><li><a href="#getcurrentframe" class="table-of-contents__link toc-highlight">getCurrentFrame()</a></li><li><a href="#getlastcompletedepochid" class="table-of-contents__link toc-highlight">getLastCompletedEpochId()</a></li><li><a href="#getlastcompletedreportdelta" class="table-of-contents__link toc-highlight">getLastCompletedReportDelta()</a></li></ul></li><li><a href="#methods" class="table-of-contents__link toc-highlight">Methods</a><ul><li><a href="#setallowedbeaconbalanceannualrelativeincrease" class="table-of-contents__link toc-highlight">setAllowedBeaconBalanceAnnualRelativeIncrease()</a></li><li><a href="#setallowedbeaconbalancerelativedecrease" class="table-of-contents__link toc-highlight">setAllowedBeaconBalanceRelativeDecrease()</a></li><li><a href="#setbeaconreportreceiver" class="table-of-contents__link toc-highlight">setBeaconReportReceiver()</a></li><li><a href="#setbeaconspec" class="table-of-contents__link toc-highlight">setBeaconSpec()</a></li><li><a href="#initialize_v2" class="table-of-contents__link toc-highlight">initialize_v2()</a></li><li><a href="#addoraclemember" class="table-of-contents__link toc-highlight">addOracleMember()</a></li><li><a href="#removeoraclemember" class="table-of-contents__link toc-highlight">removeOracleMember()</a></li><li><a href="#setquorum" class="table-of-contents__link toc-highlight">setQuorum()</a></li><li><a href="#reportbeacon" class="table-of-contents__link toc-highlight">reportBeacon()</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.2ea3e7c3.js"></script>
<script src="/assets/js/main.8547ac4c.js"></script>
</body>
</html>